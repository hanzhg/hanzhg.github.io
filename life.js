const canvas=document.querySelector("canvas"),context=canvas.getContext("2d");canvas.width=window.innerWidth,canvas.height=window.innerHeight;let currentX=window.innerWidth,currentY=window.innerHeight,mouseX=window.innerWidth,mouseY=window.innerHeight;const res=10,columns=Math.floor(canvas.width/10),rows=Math.floor(canvas.height/10);let on=!1;function buildGrid(){const a=Array(columns).fill(null);for(var b=0;b<columns;b++)a[b]=Array(rows).fill(null);return a}let grid=buildGrid();requestAnimationFrame(update);const startButton=document.querySelector("#start"),stopButton=document.querySelector("#stop"),restartButton=document.querySelector("#restart");startButton.addEventListener("click",function(){on=!0}),stopButton.addEventListener("click",function(){on=!1}),restartButton.addEventListener("click",function(){grid=Array(columns).fill(0).map(()=>Array(rows).fill(0)),on=!1}),document.addEventListener("click",function(){x=Math.floor(currentX/res),y=Math.floor(currentY/res),grid[x][y]=1},!1),document.addEventListener("mousemove",function(a){mouseX=a.pageX,mouseY=a.pageY,null===currentX&&(currentX=a.pageX,currentY=a.pageY)});function update(){on&&(grid=nextGen(grid)),render(grid),currentX+=mouseX-currentX,currentY=currentY+(mouseY-currentY)-160,requestAnimationFrame(update)}function nextGen(a){const b=a.map(a=>[...a]);for(let c=0;c<a.length;c++)for(let d=0;d<a[c].length;d++){const e=a[c][d];let f=0;for(let b=-1;2>b;b++)for(let e=-1;2>e;e++){if(0===b&&0===e)continue;const g=c+b,h=d+e;if(0<=g&&0<=h&&g<columns&&h<rows){const g=a[c+b][d+e];f+=g}}1===e&&2>f?b[c][d]=0:1===e&&3<f?b[c][d]=0:0===e&&3===f&&(b[c][d]=1)}return b}function render(a){for(let b=0;b<a.length;b++)for(let c=0;c<a[b].length;c++){const d=a[b][c];context.beginPath(),context.rect(b*res,c*res,res,res),context.fillStyle=d?"black":"white",context.fill()}}